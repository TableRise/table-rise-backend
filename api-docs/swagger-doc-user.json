{"openapi":"3.0.3","info":{"title":"TableRise - user","contact":{"email":"tablerise@outlook.com","name":"tablerise"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"3.0.0"},"servers":[{"url":"http://localhost:3001"}],"tags":[{"name":"external"},{"name":"management"},{"name":"authentication"},{"name":"register"}],"paths":{"/oauth/google":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}}}},"/oauth/facebook":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}}}},"/oauth/discord":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}}}},"/profile/all":{"get":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"description":"This route returns all users registered in database"}},"/profile/{id}/verify":{"get":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"email","in":"query","required":false,"schema":{"type":"string"}}],"description":"This route receives an userId and send an email to verify the user. The user status is changed and is necessary to confirm the email using the code send in the email message to perform any further operations."}},"/profile/register":{"post":{"tags":["register"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user registration, after register email confirmation is needed.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"Urban_Bashirian@gmail.com"},"password":{"example":"TheWorld@122"},"twoFactorSecret":{"example":{"active":false}},"nickname":{"example":"Sasha83"},"picture":{"example":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/99.jpg"},"details":{"example":{"firstName":"Miriam","lastName":"Emard","pronoun":"she/her","secretQuestion":{"question":"What sound does the fox?","answer":"Kikikikikiu"},"birthday":"Miriam","gameInfo":{"campaigns":[],"characters":[],"badges":[]},"biography":"Miriam","role":"admin"}}}}}}}}},"/profile/login":{"post":{"tags":["authentication"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user login","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"test@email.com"},"password":{"example":"secret-secret"}}}}}}}},"/profile/{id}/update":{"put":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"example":"Wyman.McClure"},"picture":{"example":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1113.jpg"},"details":{"example":{"firstName":"Laverne","lastName":"Borer","pronoun":"she/her","birthday":"Laverne","biography":"Laverne"}}}}}}}}},"/profile/{id}/confirm":{"patch":{"tags":["register"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"description":"This route must be used to confirm an account that was recently created the route receives the param \"code\", that was send to the user email in the signup."}},"/profile/{id}/2fa/activate":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for 2FA activation"}},"/profile/{id}/2fa/reset":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route for 2FA reset, verification code send to user email is needed."}},"/profile/{id}/update/email":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}}],"description":"Route for email update, verification code send to user email is needed. If the user has 2FA enabled the 2FA token will be needed as well.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"newemail@email.com"}}}}}}}},"/profile/{id}/update/game-info":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"infoId","in":"query","required":true,"schema":{"type":"string"}},{"name":"targetInfo","in":"query","required":true,"schema":{"type":"string"}},{"name":"operation","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to update user game info. Params - infoId: expects a user id. Query - id: id to add at the info; info: \"badges\" | \"campaigns\" | \"characters\"; operation: \"add\" | \"remove\""}},"/profile/{id}/reset":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}]}},"/profile/{id}/delete":{"delete":{"tags":["management"],"responses":{"204":{"description":"No content"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}}],"description":"Route for user deletion, if the user has 2FA enabled the 2FA token will be needed."}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}
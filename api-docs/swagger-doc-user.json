{"openapi":"3.0.3","info":{"title":"TableRise - user","contact":{"email":"tablerise@outlook.com","name":"tablerise"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"3.0.0"},"servers":[{"url":"http://localhost:3001"}],"tags":[{"name":"external"},{"name":"register"},{"name":"users"},{"name":"authentication"},{"name":"management"},{"name":"authorization"}],"paths":{"/oauth/google":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route to login with google"}},"/oauth/facebook":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route to login with facebook"}},"/oauth/discord":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route to login with discord"}},"/oauth/{id}/complete":{"put":{"tags":["register"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route to confirm external registration","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"example":"Gunner85"},"picture":{"example":{"id":"","link":"","uploadDate":"2023-12-06T01:09:40.735Z"}},"firstName":{"example":"Robyn"},"lastName":{"example":"Torphy"},"pronoun":{"example":"she/her"},"birthday":{"example":"1944-05-11T11:48:47.988Z"},"biography":{"example":"catch junkie"}}}}}}}},"/profile/all":{"get":{"tags":["users"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"description":"This route returns all users registered in database"}},"/profile/{id}":{"get":{"tags":["users"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route to recovery of one user"}},"/profile/verify":{"get":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"newEmail","in":"query","required":false,"schema":{"type":"string"}}],"description":"This route receives an userId and send an email to verify the user.\n\nThe user status is changed and is necessary to confirm the email using the code sent in the email message to perform any further operations."}},"/profile/register":{"post":{"tags":["register"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user registration, after register email confirmation is needed.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"Ashton87@gmail.com"},"password":{"example":"TheWorld@122"},"twoFactorSecret":{"example":{"active":false}},"nickname":{"example":"Raphael83"},"picture":{"example":{"id":"","link":"","uploadDate":"2023-12-06T01:09:40.741Z"}},"details":{"example":{"firstName":"Janis","lastName":"Krajcik","pronoun":"she/her","secretQuestion":{"question":"what-color-do-you-like-the-most","answer":"black"},"birthday":"Janis","gameInfo":{"campaigns":[],"characters":[],"badges":[]},"biography":"Janis","role":"admin"}}}}}}}}},"/profile/login":{"post":{"tags":["authentication"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user login","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"test@email.com"},"password":{"example":"secret-secret"}}}}}}}},"/profile/{id}/picture":{"post":{"tags":["management"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route used to upload a photo as profile ficture - Only PNG or JPEG"}},"/profile/{id}/update":{"put":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for update user but only allowed fields.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"example":"Kelly.Gerhold87"},"picture":{"example":{"id":"","link":"","uploadDate":"2023-12-06T01:09:40.742Z"}},"details":{"example":{"firstName":"Kate","lastName":"Witting","pronoun":"she/her","birthday":"Kate","biography":"Kate"}}}}}}}}},"/profile/{id}/question/activate":{"patch":{"tags":["authorization"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}},{"name":"isUpdate","in":"query","required":false,"schema":{"type":"boolean"}}],"description":"Activate or Update the secretQuestion - 2FA will be disabled","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"question":{"example":"what-is-your-grandfather-last-name"},"answer":{"example":"Silvera"}}}}}}}},"/profile/{id}/confirm":{"patch":{"tags":["register"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"description":"This route must be used to confirm an account that was recently created the route receives the param \"code\", that was send to the user email in the signup."}},"/profile/{id}/2fa/activate":{"patch":{"tags":["authorization"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"isReset","in":"query","required":false,"schema":{"type":"boolean"}}],"description":"Route for 2FA reset, verification code send to user email is needed.\n\nIf isReset = true the 2FA will be reset not activated"}},"/profile/{id}/update/email":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}}],"description":"Route for email update, verification code send to user email is needed.\n\nIf the user has 2FA enabled the 2FA token will be needed as well.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"example":"newemail@email.com"}}}}}}}},"/profile/{id}/update/password":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}}],"description":"Route to perform the password reset operation, receives an email code and 2FA if enabled."}},"/profile/{id}/update/game-info":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"infoId","in":"query","required":true,"schema":{"type":"string"}},{"name":"targetInfo","in":"query","required":true,"schema":{"type":"string"}},{"name":"operation","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to update user game info.\n\n------------------------\nParams:\n- userId: expects an user id.\n\nQuery:\n- id: content id to add or remove\n- info: \"badges\" | \"campaigns\" | \"characters\"\n- operation: \"add\" | \"remove\""}},"/profile/{id}/reset":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route for user reset, this route erase all the content in: characters - campaings - badges"}},"/profile/{id}/delete":{"delete":{"tags":["management"],"responses":{"204":{"description":"No content"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":false,"schema":{"type":"string"}}],"description":"Route for user deletion, if the user has 2FA enabled the 2FA token will be needed."}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}